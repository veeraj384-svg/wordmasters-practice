<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Week 1 Quiz</title>
<link rel="stylesheet" href="/assets/styles.css">
</head>
<body>
<script src="/assets/ui.js"></script>

<div class="wrap">
  <div class="bar">
    <div>
      <h1>Week 1 Quiz</h1>
      <p class="sub">Match meanings + choose the best word in context.</p>
    </div>
    <div class="actions">
      <span id="score" class="pill">Score: 0 / 20</span>
      <button class="btn" onclick="check()">Check</button>
      <button class="btn" onclick="resetAll()">Reset</button>
    </div>
  </div>

  <div class="card" style="margin-top:14px;">
    <div class="kicker">Part 1 — Match the meaning</div>
    <div id="part1"></div>
  </div>

  <div class="card" style="margin-top:14px;">
    <div class="kicker">Part 2 — Best word in the sentence</div>
    <div id="part2"></div>
  </div>
</div>

<script>
const KEY="wm_progress_v1";

const part1 = [
  {w:"stamina", a:"strength to keep going for a long time"},
  {w:"evade", a:"avoid or escape (a duty, question, or danger)"},
  {w:"sketchy", a:"doubtful; not trustworthy; suspicious"},
  {w:"tyrant", a:"cruel ruler who uses power unfairly"},
  {w:"shirk", a:"avoid work or responsibility"},
  {w:"amicable", a:"friendly and peaceful"},
  {w:"mettle", a:"courage/strength shown in a challenge"},
  {w:"domineer", a:"try to control others in a bossy way"},
  {w:"mundane", a:"ordinary; not exciting"},
  {w:"disposition", a:"a person’s usual mood or attitude"}
];

const p2Items = [
  {a:"enact", prompt:"The council voted to ________ a new rule about recycling."},
  {a:"establish", prompt:"We should ________ a routine so homework happens at the same time daily."},
  {a:"rigorous", prompt:"The coach demanded a ________ practice schedule with no shortcuts."},
  {a:"peaked", prompt:"The applause ________ when the winner walked on stage."},
  {a:"lax", prompt:"The museum’s rules were too ________, so people touched the paintings."},
  {a:"threshold", prompt:"She paused at the ________ of the classroom before speaking."},
  {a:"sneer", prompt:"He answered with a ________ that showed he thought the idea was silly."},
  {a:"snicker", prompt:"They tried not to ________ during the quiet reading time."},
  {a:"bicker", prompt:"The siblings began to ________ about who would sit by the window."},
  {a:"etiquette", prompt:"Good email ________ includes a greeting and a polite closing."}
];

const p2Options = ["enact","establish","rigorous","peaked","lax","threshold","sneer","snicker","bicker","etiquette"];

function shuffle(a){
  a=[...a];
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function render(){
  const defs = shuffle(part1.map(x=>x.a));
  const p1Root = document.getElementById("part1");
  p1Root.innerHTML="";
  part1.forEach((it, i)=>{
    const div=document.createElement("div");
    div.className="q";
    div.innerHTML = `
      <div class="kicker">Question ${i+1}</div>
      <div style="font-weight:800; margin-bottom:8px;">${it.w}</div>
      <select data-answer="${it.a}">
        <option value="">— choose —</option>
        ${defs.map(d=>`<option value="${d}">${d}</option>`).join("")}
      </select>
    `;
    p1Root.appendChild(div);
  });

  const p2Root = document.getElementById("part2");
  p2Root.innerHTML="";
  p2Items.forEach((it, i)=>{
    const div=document.createElement("div");
    div.className="q";
    div.innerHTML = `
      <div class="kicker">Question ${i+1}</div>
      <div style="font-weight:800; margin-bottom:8px;">${it.prompt}</div>
      <select data-answer="${it.a}">
        <option value="">— choose —</option>
        ${p2Options.map(w=>`<option value="${w}">${w}</option>`).join("")}
      </select>
    `;
    p2Root.appendChild(div);
  });
}

function check(){
  let correct=0;
  document.querySelectorAll("select").forEach(sel=>{
    sel.classList.remove("ok","bad");
    const ok = sel.value === sel.dataset.answer;
    if(ok){ sel.classList.add("ok"); correct++; }
    else sel.classList.add("bad");
  });
  document.getElementById("score").textContent = `Score: ${correct} / 20`;

  const p = JSON.parse(localStorage.getItem(KEY) || "{}");
  p.week1 = (correct >= 18); // premium “pass” threshold
  localStorage.setItem(KEY, JSON.stringify(p));
}

function resetAll(){
  document.querySelectorAll("select").forEach(sel=>{ sel.value=""; sel.classList.remove("ok","bad"); });
  document.getElementById("score").textContent = "Score: 0 / 20";
}

render();
</script>
</body>
</html>
